<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Research and development in system internals, reverse engineering, and low-level programming">
    <title>Danny's Blog</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap">
    <link rel="stylesheet" href="blog.css">
    <script>
        // Pre-render initialization
        if (localStorage.getItem('blog-read-mode') === 'true') {
            document.documentElement.classList.add('read-mode-preload');
            
            // Add these styles to avoid any black flash or green text
            document.write('<style>' +
                'html, body { background-color: #f8f8f8 !important; color: #333 !important; }' +
                '.page-transition-overlay { background-color: #f8f8f8 !important; }' +
                '</style>');
        }
    </script>
    <style>
        .page-transition-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #000;
            z-index: 9999;
            opacity: 1;
            transition: opacity 0.5s ease;
            pointer-events: none;
        }
        
        /* Read mode overlay styles */
        html.read-mode-preload .page-transition-overlay,
        body.read-mode .page-transition-overlay,
        body.read-mode-init .page-transition-overlay {
            background-color: #f8f8f8 !important;
        }
        
        /* Keep the black overlay fully visible until completely loaded */
        body.loading {
            background-color: #000;
        }
        
        body.loading .page-transition-overlay {
            opacity: 1;
        }
        
        /* Complete invisibility of content until fully ready */
        body.loading .container,
        body.loading #toggle-rain,
        body.loading .read-mode-toggle,
        body.loading #matrix-rain,
        body.loading .content-backdrop {
            opacity: 0;
        }
        
        /* Prevent flash of green when in reading mode */
        html.read-mode-preload,
        body.read-mode-init {
            background-color: #f8f8f8 !important;
            color: #333 !important;
            visibility: hidden;
        }
        
        body.read-mode-init .blog-title {
            color: #333 !important;
            text-shadow: none !important;
        }
        
        body.read-mode-init .blog-post {
            background-color: rgba(255, 255, 255, 0.95) !important;
            border-color: #ddd !important;
        }
        
        body.read-mode-init .post-content h2,
        body.read-mode-init .post-link,
        body.read-mode-init .post-date,
        body.read-mode-init .post-content p {
            color: #333 !important;
        }
        
        body.read-mode-init .tag {
            background-color: #f5f5f5 !important;
            color: #444 !important;
            border-color: #ddd !important;
        }
        
        body.read-mode-init .tag.read-more {
            background-color: rgba(0, 102, 204, 0.1) !important;
            color: #0066cc !important;
        }
        
        body.read-mode-init .content-backdrop {
            background-color: rgba(240, 240, 240, 0.98) !important;
        }
        
        body.read-mode-init #matrix-rain {
            opacity: 0.03 !important;
        }
    </style>
</head>
<body class="loading">
    <script>
        // Immediate execution before any elements are painted
        document.addEventListener('DOMContentLoaded', function() {
            if (localStorage.getItem('blog-read-mode') === 'true') {
                document.documentElement.style.backgroundColor = '#f8f8f8';
                document.documentElement.style.color = '#333';
                document.body.style.color = '#333';
            }
        }, {once: true});
    </script>
    <div class="page-transition-overlay"></div>
    <canvas id="matrix-rain"></canvas>
    <div class="content-backdrop"></div>
    <button id="toggle-rain" class="toggle-rain-btn" title="Toggle Matrix Effect">
        <i class="fas fa-tint"></i>
    </button>
    <button id="read-mode-toggle" class="read-mode-toggle" title="Toggle Reading Mode">
        <i class="fas fa-book-reader"></i>
    </button>
    <div class="container">
        
        <div class="row justify-content-center">
            <div class="col-12 col-lg-10 col-xl-8">
                <h1 class="blog-title">Blog</h1>
                <div class="blog-posts">
                    <article class="blog-post">
                        <div class="post-content">
                            <h2><a href="blog-post.html" class="post-link">Creating a Basic Aimbot: Part 1</a></h2>
                            <div class="post-date">28th, Mar, 2025</div>
                            <p>Creating an aimbot for educational purposes is an excellent way to understand game internals, memory manipulation, and 3D math.</p>
                            <div class="post-tags">
                                <span class="tag">C++</span>
                                <span class="tag">Game Hacking</span>
                                <a href="blog-post.html" class="tag read-more">Read More >>></a>
                            </div>
                        </div>
                    </article>

                    <article class="blog-post">
                        <div class="post-content">
                            <h2><a href="blog-post-2.html" class="post-link">Reverse Engineering Windows</a></h2>
                            <div class="post-date">15th, Feb, 2025</div>
                            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec ac est suscipit, vestibulum elit et, mattis tellus.</p>
                            <div class="post-tags">
                                <span class="tag">C++</span>
                                <span class="tag">Reverse Engineering</span>
                                <a href="blog-post-2.html" class="tag read-more">Read More >>></a>
                            </div>
                        </div>
                    </article>

                    <article class="blog-post">
                        <div class="post-content">
                            <h2><a href="blog-post-3.html" class="post-link">Low-Level Network Protocols</a></h2>
                            <div class="post-date">3rd, Jan, 2025</div>
                            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec ac est suscipit, vestibulum elit et, mattis tellus.</p>
                            <div class="post-tags">
                                <span class="tag">C</span>
                                <span class="tag">Networking</span>
                                <a href="blog-post-3.html" class="tag read-more">Read More >>></a>
                            </div>
                        </div>
                    </article>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
    <script>
        // Set overlay color immediately based on saved read mode
        (function() {
            const overlay = document.querySelector('.page-transition-overlay');
            if (localStorage.getItem('blog-read-mode') === 'true') {
                overlay.style.backgroundColor = '#f8f8f8';
            }
        })();
        
        // Apply reading mode right at page load, before any rendering
        (function() {
            // Check for saved reading mode ASAP
            const savedReadMode = localStorage.getItem('blog-read-mode') === 'true';
            if (savedReadMode) {
                // Add class to html element to prevent any rendering until properly styled
                document.documentElement.classList.add('read-mode-preload');
                // Apply classes to body for the reading mode
                document.body.classList.add('read-mode');
                document.body.classList.add('read-mode-init');
            }
        })();
        
        // Safely display the page after all resources and styles are applied
        document.addEventListener('DOMContentLoaded', function() {
            // Slightly longer delay to ensure all styles are properly applied
            setTimeout(() => {
                // First set up the styles and transitions
                const container = document.querySelector('.container');
                const toggleRain = document.querySelector('#toggle-rain');
                const readModeToggle = document.querySelector('.read-mode-toggle');
                const matrixRain = document.querySelector('#matrix-rain');
                
                container.style.transition = 'opacity 0.3s ease';
                toggleRain.style.transition = 'opacity 0.3s ease';
                readModeToggle.style.transition = 'opacity 0.3s ease';
                matrixRain.style.transition = 'opacity 0.3s ease';
                
                // Make everything visible with a slight delay
                setTimeout(() => {
                    container.style.opacity = '1';
                    toggleRain.style.opacity = '1';
                    readModeToggle.style.opacity = '1';
                    
                    // Remove loading and initialization classes
                    document.body.classList.remove('loading');
                    document.body.classList.remove('read-mode-init');
                    document.documentElement.classList.remove('read-mode-preload');
                    document.querySelector('.page-transition-overlay').style.opacity = '0';
                    
                    // Make html visible again
                    document.documentElement.style.visibility = 'visible';
                }, 100);
            }, 100);
        });
        
        // Function to save preferences to localStorage
        function savePreferences() {
            const isReadMode = document.body.classList.contains('read-mode');
            const isMatrixActive = document.getElementById('toggle-rain').classList.contains('active');
            
            localStorage.setItem('blog-read-mode', isReadMode ? 'true' : 'false');
            localStorage.setItem('blog-matrix-active', isMatrixActive ? 'true' : 'false');
        }
        
        // Matrix rain toggle
        document.getElementById('toggle-rain').addEventListener('click', function() {
            const canvas = document.getElementById('matrix-rain');
            const backdrop = document.querySelector('.content-backdrop');
            const isReadMode = document.body.classList.contains('read-mode');
            
            if (this.classList.contains('active')) {
                // Turn off matrix effect
                canvas.style.opacity = '0';
                backdrop.style.backgroundColor = isReadMode ? 
                    'rgba(255, 255, 255, 1)' : 'rgba(0, 0, 0, 0)';
                this.classList.remove('active');
            } else {
                // Turn on matrix effect
                canvas.style.opacity = isReadMode ? '0.03' : '1';
                backdrop.style.backgroundColor = isReadMode ? 
                    'rgba(240, 240, 240, 0.98)' : 'rgba(0, 0, 0, 0)';
                this.classList.add('active');
            }
            
            localStorage.setItem('blog-matrix-active', this.classList.contains('active') ? 'true' : 'false');
        });
        
        // Reading mode toggle
        document.getElementById('read-mode-toggle').addEventListener('click', function() {
            const body = document.body;
            const backdrop = document.querySelector('.content-backdrop');
            const matrixRain = document.getElementById('matrix-rain');
            const toggleRainBtn = document.getElementById('toggle-rain');
            
            if (body.classList.contains('read-mode')) {
                // Switch to dark mode
                body.classList.remove('read-mode');
                this.classList.remove('active');
                
                // Update backdrop if matrix rain is active
                if (toggleRainBtn.classList.contains('active')) {
                    backdrop.style.backgroundColor = 'rgba(0, 0, 0, 0)';
                    matrixRain.style.opacity = '1';
                }
            } else {
                // Switch to read mode
                body.classList.add('read-mode');
                this.classList.add('active');
                
                // Update backdrop if matrix rain is active
                if (toggleRainBtn.classList.contains('active')) {
                    backdrop.style.backgroundColor = 'rgba(240, 240, 240, 0.98)';
                    matrixRain.style.opacity = '0.03';
                }
            }
            
            savePreferences();
        });
        
        // Load saved preferences
        window.addEventListener('load', function() {
            const savedReadMode = localStorage.getItem('blog-read-mode');
            const savedMatrixActive = localStorage.getItem('blog-matrix-active');
            
            const body = document.body;
            const backdrop = document.querySelector('.content-backdrop');
            const matrixRain = document.getElementById('matrix-rain');
            const toggleRainBtn = document.getElementById('toggle-rain');
            const readModeToggle = document.getElementById('read-mode-toggle');
            
            // Apply reading mode if saved
            if (savedReadMode === 'true') {
                body.classList.add('read-mode');
                readModeToggle.classList.add('active');
            }
            
            // Apply matrix rain setting
            const shouldEnableMatrix = savedMatrixActive === null || savedMatrixActive === 'true';
            
            if (shouldEnableMatrix) {
                toggleRainBtn.classList.add('active');
                matrixRain.style.opacity = body.classList.contains('read-mode') ? '0.03' : '1';
                backdrop.style.backgroundColor = body.classList.contains('read-mode') ? 
                    'rgba(240, 240, 240, 0.98)' : 'rgba(0, 0, 0, 0)';
            } else {
                matrixRain.style.opacity = '0';
                backdrop.style.backgroundColor = body.classList.contains('read-mode') ? 
                    'rgba(255, 255, 255, 1)' : 'rgba(0, 0, 0, 0)';
                toggleRainBtn.classList.remove('active');
            }
            
            // Modified link transition to use the page transition overlay
            document.querySelectorAll('a').forEach(link => {
                if (link.hostname === window.location.hostname) {
                    link.addEventListener('click', function(e) {
                        // Don't apply to download links or anchors
                        if (link.getAttribute('download') || link.getAttribute('href').startsWith('#')) {
                            return;
                        }
                        
                        e.preventDefault();
                        
                        // Set the reading mode in transitions
                        const isReadMode = document.body.classList.contains('read-mode');
                        
                        // Apply reading mode text color to body immediately
                        if (isReadMode) {
                            document.body.style.color = '#333';
                        }
                        
                        // Create a persistent overlay that won't flicker
                        const overlay = document.createElement('div');
                        overlay.style.position = 'fixed';
                        overlay.style.top = '0';
                        overlay.style.left = '0';
                        overlay.style.width = '100%';
                        overlay.style.height = '100%';
                        overlay.style.backgroundColor = isReadMode ? '#f8f8f8' : '#000';
                        overlay.style.color = isReadMode ? '#333' : '#00ff00';
                        overlay.style.zIndex = '99999';
                        overlay.style.opacity = '0';
                        overlay.style.transition = 'opacity 0.3s ease';
                        document.body.appendChild(overlay);
                        
                        // Fade to overlay color
                        setTimeout(() => {
                            overlay.style.opacity = '1';
                        }, 10);
                        
                        // Add special flags to localStorage to indicate a page transition with reading mode state
                        localStorage.setItem('blog-page-transition', 'true');
                        localStorage.setItem('blog-transition-read-mode', isReadMode ? 'true' : 'false');
                        
                        // Navigate after fade completes
                        setTimeout(() => {
                            window.location.href = link.href;
                        }, 300);
                    });
                }
            });
            
            // Handle page entry animation - adjusted to work with our new approach
            if (!localStorage.getItem('blog-page-transition')) {
                // Only fade in if not coming from another internal page
                document.body.style.opacity = '0';
                setTimeout(() => {
                    document.body.style.transition = 'opacity 0.5s ease';
                    document.body.style.opacity = '1';
                }, 100);
            }
        });
        
        // Check if we're coming from another page with a transition
        if (localStorage.getItem('blog-page-transition') === 'true') {
            // Clear the flags immediately
            const wasInReadMode = localStorage.getItem('blog-transition-read-mode') === 'true';
            localStorage.removeItem('blog-page-transition');
            localStorage.removeItem('blog-transition-read-mode');
            
            // Set appropriate colors for read mode
            if (wasInReadMode) {
                document.body.style.color = '#333';
                document.documentElement.style.color = '#333';
            }
            
            // Keep the overlay visible longer with appropriate color
            const overlay = document.querySelector('.page-transition-overlay');
            overlay.style.backgroundColor = wasInReadMode ? '#f8f8f8' : '#000';
            overlay.style.opacity = '1';
        }
    </script>
</body>
</html> 